<!DOCTYPE HTML>
<html>
<head>
	<!-- Data -->
	<script src="data/gdp.js"></script>
	<script src="data/regions.js"></script>
	<script src="data/ex.js"></script>

	<!-- Libraries -->
	<script src="http://d3js.org/d3.v3.min.js"></script>
	<script type="text/javascript" src="lib/jquery-1.8.2.min.js"></script>
	<script type="text/javascript" src="lib/jquery.tipsy.js"></script>
    <link type="text/css" rel="stylesheet" href="css/tipsy.css"/>
    
    <!-- Styles -->
    <link rel="stylesheet" href="css/scrolling.css" />
	<link type="text/css" rel="stylesheet" href="css/scatter.css"></link>
    
</head>
<body>
	<!-- Grapihc -->
	<div id='graphic'>
	    <div id='sections'>
	      <!-- Sections -->
	      <section class="step">
	        <div class="title">What is this?</div>
	          <text>An example of how you can use scrolling as a storytelling technique to introduce data visualizations.</text>
	      </section>
	      <section class="step">
	        <div class="title">Set the scene</div>
	          <text>First, be sure your audience knows what you're talking about.  We're talking about Income and Life Expectancy in 2013 <a target="_blank" href="http://www.gapminder.org/world/#$majorMode=chart$is;shi=t;ly=2003;lb=f;il=t;fs=11;al=30;stl=t;st=t;nsl=t;se=t$wst;tts=C$ts;sp=5.59290322580644;ti=2010$zpv;v=0$inc_x;mmid=XCOORDS;iid=phAwcNAVuyj1jiMAkmq1iMg;by=ind$inc_y;mmid=YCOORDS;iid=phAwcNAVuyj2tPLxKvvnNPA;by=ind$inc_s;uniValue=8.21;iid=phAwcNAVuyj0XOoBL_n5tAQ;by=ind$inc_c;uniValue=255;gid=CATID0;by=grp$map_x;scale=log;dataMin=240;dataMax=184563$map_y;scale=lin;dataMin=14;dataMax=77$map_s;sma=49;smi=2.65$cd;bd=0$inds=">(data)</a>.</text>
	      </section>
	      <section class="step">
	        <div class="title">Introduce characters</div>
	          <text>Explicitly encode your data (say what each symbol represents).  This is Uganda.</text>
	      </section>
	      <section class="step">
	        <div class="title">Create tension</div>
	          <text>Slowly reveal more data.  Here are all Sub-Saharan African countries.</text>
	      </section>
	      <section class="step">
	        <div class="title">Independently introduce variables</div>
	          <text>Seperately introduce variables like X-position and Y-position.</text>
	      </section>
	      <section class="step">
	        <div class="title">Reveal more data</div>
	          <text>Now that people are ready for it</text>
	      </section>
	      <section class="step">
	        <div class="title">And more variables</div>
	          <text>Since they've processed the other ones.</text>
	      </section>
	      <section class="step">
	        <div class="title">Provide Resolution</div>
	          <text>Come to a conclusion, or facilitate exploration (hover over the circles!)</text>
	      </section>
	      <section class="step">
	        <div class="title">Learn more!</div>
	         <text>About <a target="_blank" href="http://shop.oreilly.com/product/0636920040064.do">storytelling</a></text>
	      </section>
	      <section class="step">
	       <div class="title">Learn more!</div>
	         <text>About <a target="_blank" href="http://vallandingham.me/scroller.html">scrolling</a></text>
	      </section>
	    </div>
	<!-- Viz container -->
    <div id='vis'>
		<div id="scatter-div">
			<svg id="scatter-svg" height=900 width=900></svg>
		</div>
	</div>
	<!-- JS files -->
    <script type="text/javascript" src="js/queue.js"></script>
    <script type="text/javascript" src="js/scroller.js"></script>
    <script type="text/javascript" src="js/sections.js"></script>
	<script src="js/scatter.js"></script>
	<script>
		// Prep data
		var data = []
		var uniqueRegions = []
		regions.map(function(region){
			var gdpValue = gdp.filter(function(d) {return d.country == region.country})[0]
			if(gdpValue == undefined || !isFinite(gdpValue.gdp) || gdpValue.gdp == null) return
			var exValue = ex.filter(function(d) {return d.country == region.country})[0]
			if(exValue == undefined || !isFinite(exValue.ex) || exValue.ex == null) return
			var obj = {
				country:region.country, 
				region:region.region, 
				id:region.ID,
				ex:exValue.ex, 
				gdp:gdpValue.gdp
			}
			data.push(obj)
			if(uniqueRegions.indexOf(region.region) == -1) uniqueRegions.push(region.region)
		})
		var scatter = new Scatter({data:data, uniqueRegions:uniqueRegions})
	</script>
</html>